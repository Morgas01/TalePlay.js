<!DOCTYPE>
<html>
	<head>
		<title>Morgas.Controller.js - Test</title>
		<meta charset="UTF-8">
		
		<script type="text/javascript" src="Morgas/src/Morgas.js"></script>
		<script type="text/javascript" src="Morgas/src/DB/Morgas.DB.js"></script>
		<script type="text/javascript" src="Morgas.Controller.js"></script>
		<script type="text/javascript" src="Morgas.Controller.Mapping.js"></script>
		<script type="text/javascript" src="Morgas.Controller.Keyboard.js"></script>
		<script type="text/javascript" src="Morgas.Controller.Gamepad.js"></script>
		
		<script type="text/javascript" src="Morgas.Board.js"></script>
		<script type="text/javascript" src="Morgas.Board.Layer.js"></script>
		<script type="text/javascript" src="Morgas.Board.GUIElement.js"></script>
		<script type="text/javascript" src="Morgas.Menu.js"></script>
		<script type="text/javascript" src="Morgas.Board.GUIElement.ControllerConfig.js"></script>
		
		<link rel="stylesheet" type="text/css" href="css/structure/core.css">
		<link rel="stylesheet" type="text/css" href="css/structure/GUIElement.Menu.css">
		<link rel="stylesheet" type="text/css" href="css/structure/GUIElement.ControllerConfig.css">
		
		<link rel="stylesheet" type="text/css" href="css/themes/TalePlay-classic.css">
		
		<style type="text/css">
			#board {
			    height:500px;
			    width:500px;
			}
		</style>
		
		<script type="text/javascript">
			function logController()
			{
				var type=this instanceof Morgas.Controller.Keyboard?"Keyboard":"Gamepad "
				document.getElementById("logger").value=type+": "+this;
			}
			var controller=new Morgas.Controller.Keyboard();
			controller.addListener("changed",logController)
			window.addEventListener("gamepadconnected", function(e) {
			  var gp=new µ.Controller.Gamepad(e.gamepad,{
				  axes:{}
			  });
			  gp.addListener("changed",logController);
			  board.addController(gp);
			});
			window.addEventListener("load", function()
			{
				board=new µ.Board(document.getElementById("board"));
				board.addController(controller);
				layer=new µ.Board.Layer();
				var config=new µ.Board.GUIElement.ControllerConfig({controller:controller,buttons:10,analogSticks:2});
				config.domElement.classList.add("panel");
				layer.add(config);
				board.addLayer(layer);
				
				controller.setDomElement(window);
			}, false);
		</script>
	</head>
	<body>
		<textarea id="logger" style="width: 100%;height:25%;"></textarea>
		<div id="board"></div>
	</body>
</html>