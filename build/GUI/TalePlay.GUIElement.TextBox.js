(function(t,e,i){var s=i("GUIElement"),n=i("shortcut")({rs:"rescope"}),o=s.TextBox=t.Class(s,{init:function(t){n.rs.all(["_run"],this),t=t||{},this.superInit(s,t),this.addStyleClass("TextBox"),this.createListener("complete"),this.parts=[];for(var e=0,i=t.parts&&t.parts.length;i>e;e++){var o=t.parts[e];this.addPart(o.text,o.speed,o.stop,o.styleClass,o.tag)}this._timeout=null},addPart:function(t,e,i,s,n){this.parts.push({text:t||"",speed:1e3/e||25,stop:!!i,styleClass:s,tag:n||"span"})},start:function(){null===this._timeout&&(this.domElement.classList.remove("complete","stop"),this._run())},_run:function(){if(this._timeout=null,this.parts.length>0){var t=this.parts[0];if(t.domElement||(t.domElement=document.createElement(t.tag),t.styleClass&&t.domElement.classList.add(t.styleClass),this.domElement.appendChild(t.domElement)),t.domElement.textContent+=t.text[t.domElement.textContent.length],t.domElement.textContent.length===t.text.length&&(this.parts.shift(),t.stop))return this.domElement.classList.add("stop"),void 0;this._timeout=setTimeout(this._run,t.speed)}else this.domElement.classList.add("complete")},show:function(t){for(null!==this._timeout&&(clearTimeout(this._timeout),this._timeout=null);this.parts.length>0;){var e=this.parts[0];if(e.domElement||(e.domElement=document.createElement(e.tag),e.domElement.classList.add(e.styleClass),this.domElement.appendChild(e.domElement)),e.domElement.textContent=e.text,this.parts.splice(0,1),t&&e.stop)return this.domElement.classList.add("stop"),void 0}this.domElement.classList.add("complete")},onButton:function(t){1==t.value&&(null===this._timeout?0===this.parts.length?this.fire("complete"):this.start():this.show(!0))}});e("GUI.TextBox",o)})(Morgas,Morgas.setModule,Morgas.getModule);