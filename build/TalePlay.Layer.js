(function(e,t,s,r){var o=this.TalePlay=this.TalePlay||{},l=s("Listeners"),n=s("shortcut")({node:"NodePatch"}),i=o.Layer=e.Class(l,{init:function(e){this.superInit(l),e=e||{},this.nodePatch=new n.node(this,{parent:"board",children:"GUIElements",addChild:"add",removeChild:"remove",hasChild:"has"},!0),this.mode=e.mode||i.Modes.ALL,this.domElement=document.createElement("div"),this.domElement.classList.add("Layer"),this.focused=null},onController:function(e){switch(this.mode){case i.Modes.ALL:default:for(var t=0;this.GUIElements.length>t;t++)this.GUIElements[t][i._CONTROLLER_EVENT_MAP[e.type]](e);break;case i.Modes.FIRST:this.GUIElements.length>0&&this.GUIElements[0][i._CONTROLLER_EVENT_MAP[e.type]](e);break;case i.Modes.LAST:this.GUIElements.length>0&&this.GUIElements[this.GUIElements.length-1][i._CONTROLLER_EVENT_MAP[e.type]](e);break;case i.Modes.FOCUSED:this.focused&&this.focused[i._CONTROLLER_EVENT_MAP[e.type]](e)}},add:function(e,t){return r("GUIElement")&&e instanceof s("GUIElement")&&this.nodePatch.addChild(e)?("string"==typeof t&&(t=this.domElement.querySelector(t)),t||(t=this.domElement),t.appendChild(e.domElement),!0):!1},remove:function(e){return this.nodePatch.removeChild(e)?(e.domElement.remove(),e.removeListener("all",this),!0):!1},destroy:function(){this.nodePatch.remove();for(var e=this.GUIElements.slice(),t=0;e.length>t;t++)e[t].destroy();l.prototype.destroy.call(this)}});i.Modes={ALL:0,FIRST:1,LAST:2,FOCUSED:3},i._CONTROLLER_EVENT_MAP={analogStickChanged:"onAnalogStick",buttonChanged:"onButton"},t("Layer",i)})(Morgas,Morgas.setModule,Morgas.getModule,Morgas.hasModule);