(function(t,e,n){var i=n("Controller"),s=t.shortcut({rescope:"rescope"});i.Keyboard=t.Class(i,{init:function(t,e,n){this.superInit(i,void 0!==t?t:i.Keyboard.stdMapping,e),s.rescope.all(["onKeyDown","onKeyUp"],this),this.domElement=null,this.setDomElement(n||window)},setMapping:function(t){i.prototype.setMapping.call(this,t),this.mapping&&this.mapping.setValueOf("type","Keyboard")},setDomElement:function(t){this.domElement&&(this.domElement.removeEventListener("keydown",this.onKeyDown,!1),this.domElement.removeEventListener("keyup",this.onKeyUp,!1),this.domElement=null),t&&(this.domElement=t,t.addEventListener("keydown",this.onKeyDown,!1),t.addEventListener("keyup",this.onKeyUp,!1))},onKeyDown:function(t){this.onKey(t,1)},onKeyUp:function(t){this.onKey(t,0)},onKey:function(t,e){if(!this.disabled&&this.mapping&&(this.mapping.hasButtonMapping(t.code||t.key||t.keyCode)||this.mapping.hasButtonAxisMapping(t.code||t.key||t.keyCode))){t.preventDefault(),t.stopPropagation();var n={};n[t.code||t.key||t.keyCode]=e,this.setButton(n)}},destroy:function(){this.setDomElement(),i.prototype.destroy.call(this)}}),i.Keyboard.stdMapping={buttons:{13:"9",16:"1",19:"8",32:"0",97:"2",98:"3",99:"4",100:"5",101:"6",102:"7"},buttonAxis:{37:"-2",38:"3",39:"2",40:"-3",65:"-0",68:"0",83:"-1",87:"1"},axes:{}},e("Controller.Keyboard",i.Keyboard)})(Morgas,Morgas.setModule,Morgas.getModule);