(function(t,e,i){var s=i("GUIElement"),n=i("shortcut")({proxy:"proxy",tb:"GUI.TextBox",menu:"GUI.Menu"}),a=s.Dialog=t.Class(s,{init:function(t){t=t||{},t.element="fieldset",this.superInit(s,t),this.createListener("dialogEnd"),this.legend=document.createElement("legend"),this.domElement.appendChild(this.legend),this.dialogParts=t.dialogParts?t.dialogParts.slice():[],this.actions=t.actions||[],this.active=null,n.proxy("active",["onAnalogStick","onButton"],this),this.next()},next:function(t){if(this.active&&(this.active.destroy(),this.active.domElement.remove()),this.dialogParts.length>0){for(var e=this.dialogParts.shift(),i=["width","height","top","right","bottom","left"],s=0;i.length>s;s++)this.domElement.style[i[s]]=e[i[s]]||"";e.parts?(this.legend.textContent=e.title,this.active=new n.tb({parts:e.parts}),this.active.addListener("complete:once",this,"next"),this.active.start()):e.choices&&(this.active=new n.menu({items:e.choices,converter:a.MENU_CONVERTER,loop:!1,active:0,selectionType:n.menu.SelectionTypes.NONE}),this.active.addListener("select:once",this,"next")),this.domElement.appendChild(this.active.domElement)}else{var o;o=t&&"select"===t.type&&t.value.actions?this.actions.concat(t.value.actions):this.actions,this.fire("dialogEnd",{actions:o})}}});a.MENU_CONVERTER=function(t){return t.name},e("GUI.Dialog",a)})(Morgas,Morgas.setModule,Morgas.getModule);