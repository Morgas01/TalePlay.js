(function(t,e,i){var s=i("Layer.ActionMenu"),n=s.GameMenu=t.Class(s,{init:function(t){t=t||{};var e={styleClass:["panel"],actions:[{text:"save",action:"saveGame",data:t.saveData},{text:"close",action:"close"}]};t.saveData||(e.disabled=[0]),this.superInit(s,e),this.domElement.classList.add("GameMenu"),this.createListener("start close"),this.persistanceLayer="function"==typeof t.persistanceLayer?t.persistanceLayer:i(t.persistanceLayer||"Layer.Persistance"),this.dbConn=t.dbConn,this.saveClass=t.saveClass,this.saveConverter=t.saveConverter},onController:function(t){if("buttonChanged"===t.type&&1==t.value)switch(t.index){case 1:this.menu.setActive(1);break;case 2:s.prototype.onController.call(this,t)}else s.prototype.onController.call(this,t)},saveGame:function(t){if(t.data){var e=new this.persistanceLayer({dbConn:this.dbConn,saveClass:this.saveClass,saveConverter:this.saveConverter,saveData:t.data});this.board.addLayer(e)}},close:function(){this.fire("close")}});e("RPGPlayer.GameMenu",n)})(Morgas,Morgas.setModule,Morgas.getModule);